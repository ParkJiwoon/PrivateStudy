# 도커의 기초

## 1. 도커란 무엇인가?

도커의 구성
- 컨테이너형 가상화 기술을 구현하기 위한 상주 애플리케이션 (dockered 라는 데몬이 상주 실행)
- 애플리케이션을 조작하기 위한 명령형 도구 (CLI)

도커의 특징
- 애플리케이션 배포에 특화
- 애플리케이션 개발 및 운영을 컨테이너 중심으로 할 수 있음

컨테이너
- 도커가 만들어내는 게스트 운영 체제

도커의 활용 예시
- 과거엔 웹 서버를 구축하기 위해 가상 환경과 운영 환경에 같은 OS 를 설치하고 이것저것 환경 세팅 해줘야함
- 만약 이런 서버를 여러 개 구축한다면 일일히 다 해줘야 했음
- 도커가 등장하면서, 로컬 환경에 도커만 설치하면 몇 줄짜리 구성 파일 (`Dockerfile`) 과 명령어 한 줄 만으로 가상환경 (도커 컨테이너) 를 구출할 수 있음
- 개발 환경 구축 뿐만 아니라 개발 후 운영 환경에 대한 배포 기능도 더 뛰어남
- 가벼워서 운영 환경에서도 컨테이너 사용 가능
- 이식성이 뛰어나서 서로 다른 서버에 있는 도커 환경에 배포 가능하기 때문에 개발 환경과 운영 환경을 거의 동등하게 재현 가능

도커가 적합하지 않은 경우
- 컨테이너는 운영 체제의 동작을 완전히 재현하지 못함
- 좀 더 엄밀한 리눅스 계열 운영 체제의 동작이 요구되는 가상 환경에서는 기존처럼 VMWare 나 VirtualBox 같은 가상화 소프트웨어를 사용하는 것이 나음
- FreeBSD 같은 비리눅스 환경도 적합하지 않음

## 2. 도커의 기본 개념

컨테이너형 가상화 기술
- 운영 체제 수준 가상화 (Operating-system-level virtualization) 이라고도 함
- 가상화 소프트웨어 없이도 운영 체제의 리소스를 격리해 가상 운영 체제 (**컨테이너**) 로 만들 수 있음
- 호스트 운영 체제 가상화
  - 운영 체제 위에서 가상화 소프트웨어를 사용해 하드웨어를 에뮬레이션 하는 방법으로 게스트 운영 체제를 만드는 방식
  - VMWare Player, Oracle VirtualBox 등
  - 컨테이너형 가상화 기술과 비교하면 오버헤드가 더 큼

LXC 와 비교했을 때 도커의 장점
- 호스트 운영 체제의 영향을 받지 않는 실행 환경 (Docker Engine 을 이용한 실행 환경 표준화)
- DSL (Dockerfile) 을 이용한 컨테이너 구성 및 애플리케이션 배포 정의
- 이미지 버전 관리
- 레이어 구조를 갖는 이미지 포맷 (차분 빌드 가능)
- 도커 레지스트리 (이미지 저장 서버 역할)
- 프로그램 가능한 다양한 기능의 API

결론
- 도커 이전에는 애플리케이션을 호스트 운영 체제 또는 게스트 운영 체제에 배포하는 스타일이 주류
- 위 방식은 애플리케이션이 운영 체제의 영향을 강하게 받음
- 반면 도커는 컨테이너에 애플리케이션 실행 환경이 함께 배포
- 아예 실행 환경째로 배포하기 때문에 골치 아픈 환경별 의존성 문제를 근본적으로 해결
- 배포도 간단하고 이식성이 높음
  - 도커만 설치되어 있다면 CentOS 에 최적화된 애플리케이션을 Ubuntu 서버에 설치 가능